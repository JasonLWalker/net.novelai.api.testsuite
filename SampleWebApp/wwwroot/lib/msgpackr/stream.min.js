/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/msgpackr@1.10.1/stream.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Transform}from"stream";import{Packr}from"./pack.js";import{Unpackr}from"./unpack.js";var DEFAULT_OPTIONS={objectMode:!0};export class PackrStream extends Transform{constructor(r){r||(r={}),r.writableObjectMode=!0,super(r),r.sequential=!0,this.packr=r.packr||new Packr(r)}_transform(r,t,e){this.push(this.packr.pack(r)),e()}}export class UnpackrStream extends Transform{constructor(r){r||(r={}),r.objectMode=!0,super(r),r.structures=[],this.unpackr=r.unpackr||new Unpackr(r)}_transform(r,t,e){let s;this.incompleteBuffer&&(r=Buffer.concat([this.incompleteBuffer,r]),this.incompleteBuffer=null);try{s=this.unpackr.unpackMultiple(r)}catch(t){if(!t.incomplete)throw t;this.incompleteBuffer=r.slice(t.lastPosition),s=t.values}finally{for(let r of s||[])null===r&&(r=this.getNullValue()),this.push(r)}e&&e()}getNullValue(){return Symbol.for(null)}}
//# sourceMappingURL=/sm/281a5f039b0302018cbb4dcf5ba1b0ed76b6c9dd3d3e7e25913e97aa3cc2ca44.map